"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eliminarProducto=exports.actualizarProducto=exports.traerProductoPorId=exports.listarProductos=exports.crearProducto=void 0;var _prisma=require("../prisma.js"),crearProducto=function(e,t){var a,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.body,r.prev=1,r.next=4,regeneratorRuntime.awrap(_prisma.Prisma.producto.create({data:a}));case 4:n=r.sent,console.log("hola"),t.status(201).json({message:"producto creado exitosamente",content:n}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),t.status(400).json({message:"Error al crear el producto",error:r.t0.message});case 12:case"end":return r.stop()}},null,null,[[1,9]])};exports.crearProducto=crearProducto;var listarProductos=function(r,e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(_prisma.Prisma.producto.findMany());case 3:return t=r.sent,r.abrupt("return",e.status(200).json({message:"Productos encontrados",content:t}));case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",e.status(500).json({message:"Error en el servidor",error:r.t0.message}));case 10:case"end":return r.stop()}},null,null,[[0,7]])};exports.listarProductos=listarProductos;var traerProductoPorId=function(e,t){var a,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.params.id,r.prev=1,r.next=4,regeneratorRuntime.awrap(_prisma.Prisma.producto.findUnique({where:{id:Number(a)}}));case 4:if(n=r.sent){r.next=7;break}return r.abrupt("return",t.status(404).json({message:"Producto no encontrado"}));case 7:return r.abrupt("return",t.status(200).json({message:"Producto encontrado",content:n}));case 10:return r.prev=10,r.t0=r.catch(1),r.abrupt("return",t.status(500).json({message:"Error en el servidor",error:r.t0.message}));case 13:case"end":return r.stop()}},null,null,[[1,10]])};exports.traerProductoPorId=traerProductoPorId;var actualizarProducto=function(e,t){var a,n,o;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.params.id,n=e.body,r.prev=2,r.next=5,regeneratorRuntime.awrap(_prisma.Prisma.producto.findUnique({where:{id:Number(a)}}));case 5:if(r.sent){r.next=8;break}return r.abrupt("return",t.status(404).json({message:"Producto no encontrado"}));case 8:return r.next=10,regeneratorRuntime.awrap(_prisma.Prisma.producto.update({where:{id:Number(a)},data:{nombre:n.nombre,cantidad:n.cantidad,precio:n.precio,disponibilidad:n.disponibilidad},select:{id:!0,nombre:!0,cantidad:!0,precio:!0}}));case 10:return o=r.sent,r.abrupt("return",t.status(201).json({message:"Producto actualizado",content:o}));case 14:return r.prev=14,r.t0=r.catch(2),r.abrupt("return",t.status(500).json({message:"Error en el servidor",error:r.t0.message}));case 17:case"end":return r.stop()}},null,null,[[2,14]])};exports.actualizarProducto=actualizarProducto;var eliminarProducto=function(e,t){var a,n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.params.id,r.prev=1,r.next=4,regeneratorRuntime.awrap(_prisma.Prisma.producto.findUnique({where:{id:Number(a)}}));case 4:if(r.sent){r.next=7;break}return r.abrupt("return",t.status(404).json({message:"Producto no encontrado"}));case 7:return r.next=9,regeneratorRuntime.awrap(_prisma.Prisma.producto.update({where:{id:Number(a)},data:{disponibilidad:!1},select:{id:!0,nombre:!0,disponibilidad:!0}}));case 9:return n=r.sent,r.abrupt("return",t.status(200).json({message:"Producto eliminado",content:n}));case 13:return r.prev=13,r.t0=r.catch(1),r.abrupt("return",t.status(500).json({message:"Error en el servidor",error:r.t0.message}));case 16:case"end":return r.stop()}},null,null,[[1,13]])};exports.eliminarProducto=eliminarProducto;
//# sourceMappingURL=productos.controller.min.js.map
